<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="IOTA Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="IOTA Wiki Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="IOTA Wiki" href="/opensearch.xml">
<link rel="preconnect" href="${matomoUrl}">
<script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://matomo.antonionardella.it/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","6"]);var e=document,t=e.createElement("script"),p=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=a+"matomo.js",p.parentNode.insertBefore(t,p)}()</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">6.1 Objects of Consensus | IOTA Wiki</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wiki.iota.org/IOTA-2.0-Research-Specifications/6.1ObjectsOfConsensus"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-IOTA-Research-Specifications-current"><meta data-react-helmet="true" property="og:title" content="6.1 Objects of Consensus | IOTA Wiki"><meta data-react-helmet="true" name="description" content="Fast Probabilistic Consensus (FPC) is a binary voting protocol where each node starts with an initial opinion (a boolean) on an object. This specification describes how this binary voting protocol interacts with the rest of the IOTA protocol."><meta data-react-helmet="true" property="og:description" content="Fast Probabilistic Consensus (FPC) is a binary voting protocol where each node starts with an initial opinion (a boolean) on an object. This specification describes how this binary voting protocol interacts with the rest of the IOTA protocol."><meta data-react-helmet="true" name="keywords" content="binary voting protocol,node,initial opinion,fast probabilistic consensus"><meta data-react-helmet="true" property="og:image" content="https://wiki.iota.org/img/logo/Coordicide_Logo_Black.png"><meta data-react-helmet="true" name="twitter:image" content="https://wiki.iota.org/img/logo/Coordicide_Logo_Black.png"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wiki.iota.org/IOTA-2.0-Research-Specifications/6.1ObjectsOfConsensus"><link data-react-helmet="true" rel="alternate" href="https://wiki.iota.org/IOTA-2.0-Research-Specifications/6.1ObjectsOfConsensus" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wiki.iota.org/IOTA-2.0-Research-Specifications/6.1ObjectsOfConsensus" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d28ec4d8.css">
<link rel="preload" href="/assets/js/runtime~main.43588a5c.js" as="script">
<link rel="preload" href="/assets/js/main.d11b0959.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#da7ad7;color:#000000" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">Would you like to stake your tokens? <a target="_blank" href="https://assembly.sc">Read more</a> about Assembly, the upcoming permissionless Smart Contract network.</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_VLjY"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="IOTA Wiki Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_dark.svg" alt="IOTA Wiki Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link" href="/learn/about-iota/an-introduction-to-iota"><div class="link"><div class="link__body"><div class="link__label">Learn</div></div></div></a><a class="navbar__item navbar__link" href="/participate/support-the-network/about-nodes"><div class="link"><div class="link__body"><div class="link__label">Participate</div></div></div></a><div class="dropdown dropdown--hoverable dropdown--mega"><a class="navbar__item navbar__link navbar__link--active"><div class="link"><div class="link__body"><div class="link__label">Build | Coordicide Specs</div></div></div></a><div class="dropdown__container"><div class="dropdown__menu"><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Getting Started</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Chrysalis (IOTA 1.5)</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Libraries</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Smart Contracts</div></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/build/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Getting Started</div><div class="link__sublabel">IOTA development basics</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/chrysalis-docs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Chrysalis Docs</div><div class="link__sublabel">Mainnet documentation</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/iota.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Client</div><div class="link__sublabel">Interact with the IOTA network</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/smart-contracts/overview"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Wasp Node</div><div class="link__sublabel">Smart contract node</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Integrations</div></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/bee/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Bee Node</div><div class="link__sublabel">IOTA node written in Rust</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/wallet.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Wallet</div><div class="link__sublabel">Build IOTA wallets</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Coordicide (IOTA 2.0)</div></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/integration-services/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Streams and Identity</div><div class="link__sublabel">Integrate IOTA seamlessly</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/hornet/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Hornet Node</div><div class="link__sublabel">IOTA node written in Go</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/stronghold.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Stronghold</div><div class="link__sublabel">Handle secrets securely</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a aria-current="page" class="dropdown__link dropdown__link--active" href="/IOTA-2.0-Research-Specifications/Preface"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Coordicide Specs</div><div class="link__sublabel">Decentralizing IOTA</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/chronicle.rs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Chronicle Permanode</div><div class="link__sublabel">IOTA permanode</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/identity.rs/introduction"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Identity</div><div class="link__sublabel">Identity framework</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/goshimmer/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">GoShimmer Node</div><div class="link__sublabel">IOTA 2.0 node</div></div></div></a></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/streams/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Streams</div><div class="link__sublabel">Share data securely</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div></div></div></div></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog"><div class="link"><div class="link__body"><div class="link__label">Blog</div></div></div></a><a class="navbar__item navbar__link" href="/team"><div class="link"><div class="link__body"><div class="link__label">Team</div></div></div></a><div class="navbar__item navbar__item--dock"><div class="toggle toggle_bWQZ toggle--checked toggle--disabled" role="button" tabindex="-1"><div class="toggle__icon toggle__icon--unchecked" style="font-family:Material Icons">dark_mode</div><div class="toggle__icon toggle__icon--checked" style="font-family:Material Icons">light_mode</div><input type="checkbox" checked="" class="toggle__screenreader-only" aria-label="Switch between dark and light mode"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a tabindex="-1" class="sidebarLogo_FJUI" href="/"><img src="/img/logo.svg" alt="IOTA Wiki Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_dark.svg" alt="IOTA Wiki Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/Preface">Preface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/1.1Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/2.2MessageLayout">2.2 Message Layout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/2.3StandardPayloadsLayout">2.3 Standard Payloads Layout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/2.4DataFlow">2.4 Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/3.3PeerDiscovery">3.3 Peer Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/3.4NeighborSelection">3.4 Neighbor Selection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/3.5ManualPeering">3.5 Manual Peering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.1TheTangle">4.1 The Tangle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.2Timestamps">4.2 Timestamps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.3TipSelectionAlgorithm">4.3 Tip Selection Algorithm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.4Solidification">4.4 Solidification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.5RateControl">4.5 Rate Control Through Adaptive Proof of Work</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.6CongestionControl">4.6 Congestion Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/4.7Markers">4.7 Markers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/5.1UTXO">5.1 UTXO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/5.2LedgerState">5.2 Ledger State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/5.3Mana">5.3 Mana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/IOTA-2.0-Research-Specifications/6.1ObjectsOfConsensus">6.1 Objects of Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/6.2OpinionSetting">6.2 Opinion Setting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/6.3FastProbabilisticConsensus">6.3 Fast Probabilistic Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/6.4Finalization">6.4 Approval Weight and Finality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/6.5dRNG">6.5 Distributed Random Number Generator</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>6.1 Objects of Consensus</h1><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="611-preliminaries">6.1.1 Preliminaries<a class="hash-link" href="#611-preliminaries" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6111-motivation">6.1.1.1 Motivation<a class="hash-link" href="#6111-motivation" title="Direct link to heading">​</a></h3><p>FPC is a binary voting protocol where each node starts with an initial opinion (a nulled boolean) on an object.  Nodes then exchange queries and responses about their opinions during several rounds, until each node terminates with a final boolean value: see specification <!-- -->.  </p><p>FPC votes on two specific objects types: messages, in order to enforce timestamps, and transactions, in order to decide double spends. Additionally, applications can use FPC to query opinions about their opinion on other object types, although there is no guarantee that they will get a response.  </p><p>The FPC is agnostic about the rest of the protocol, particularly the questions being decided voting and how the initial opinions are set.  We require a generic way for FPC to interact with data structures in other applications. Specifically, an application needs a way to trigger FPC run. </p><p>Deciding when FPC should run is a delicate question for two reasons.</p><ol><li>It is inefficient for FPC to vote on every single transaction.</li><li>If only a sub set of nodes participate in FPC, they are more vulnerable to attack since the consensus mana held by this collection of nodes is potentially much smaller.
Thus, since it cannot vote on everything, it must use subjective criterion to trigger voting which does not leave any group vulnerable to attack.  </li></ol><p>Voting is a two-part process: querying and answering queries.  The function <code>QueryStatus</code> determines if a node should query about a particular object, and the function <code>AnswerStatus</code> determines if the node should respond.  </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6112-summary">6.1.1.2 Summary<a class="hash-link" href="#6112-summary" title="Direct link to heading">​</a></h3><p>This specification describes how this binary voting protocol interacts with the rest of the IOTA protocol.  Specifically, we define two functions, <code>QueryStatus</code> and <code>AnswerStatus</code> which govern when an object should be included in a query or response respectively. These functions depend on the metatdata <code>opinionField</code> which is also defined in this specification.  </p><p>This specification only includes the format on how applications requiring FPC should interact with it, not how to set initial opinions or, more specifically, <code>opinionField</code>.  For this information, see <!-- --> .</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6113-dependencies">6.1.1.3 Dependencies<a class="hash-link" href="#6113-dependencies" title="Direct link to heading">​</a></h3><p>This specification depends on the following specifications</p><ul><li>FPC <!-- --> </li><li>Opinion Setting </li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6114-parameters-and-lists">6.1.1.4 Parameters and Lists<a class="hash-link" href="#6114-parameters-and-lists" title="Direct link to heading">​</a></h3><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>DSMALL</code></td><td>duration</td><td>small estimated network delay, set to 5 seconds</td></tr><tr><td><code>votingEnabledObjectTypes</code></td><td>list</td><td>object types which will be voted upon</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="612-detailed-design">6.1.2 Detailed Design<a class="hash-link" href="#612-detailed-design" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6121-voting-objects-list">6.1.2.1 Voting Objects List<a class="hash-link" href="#6121-voting-objects-list" title="Direct link to heading">​</a></h2><p>FPC can potentially vote on a variety of matters.  The <code>votingEnabledObjectTypes</code> effectively lists which things will be voted upon by listing the object types which must be queried by FPC.  Specifically, when FPC prepares a query, it iterates through each object type, and then finds which objects of that type it must include in the query.  </p><p>By default, the object types <code>message</code> and <code>transaction</code> are in the list <code>votingEnabledObjectTypes</code>.  However, a second layer application can add other object types to this list, allowing other applications to use FPC. These applications will have no guarantee that they will receive responses with about custom object types, particularly if the application is not widely used.   </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6122-how-opinions-on-objects-are-stored">6.1.2.2 How Opinions on Objects Are Stored<a class="hash-link" href="#6122-how-opinions-on-objects-are-stored" title="Direct link to heading">​</a></h3><p>For every object whose type is in <code>votingEnabledObjectTypes</code>, that the local meta data stored with the object must include an <code>opinionField</code> which is either <code>NULL</code>  or the triplet <code>(opinion,level,timeFormed)</code>.  The field <code>opinion</code> is a nullable boolean value,  <code>level</code> is a number in the list <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{1,2,3\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">3</span><span class="mclose">}</span></span></span></span></span>, and <code>timeFormed</code> is the time the field was changed from <code>NULL</code>.</p><p>As will be discussed in a different specification, an opinion field will be  <code>NULL</code> until the node has received information allowing it to form an opinion, e.g. detect a conflict.  For example,  a transaction should have opinion field  <code>NULL</code> until a conflict is detected.  Such transactions should be considered &quot;good&quot;, and, in the honest setting, most transactions will have a <code>NULL</code> opinion. </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6123-query-status">6.1.2.3 Query Status<a class="hash-link" href="#6123-query-status" title="Direct link to heading">​</a></h3><p>When FPC prepares a query , see the <a href="/IOTA-2.0-Research-Specifications/6.3FastProbabilisticConsensus">FPC</a> specification, it <em>shall</em> determine which objects to include.  Conceptually, for each type in <code>votingEnabledObjectTypes</code>, the node <em>shall</em> iterate through all objects of that type and individually decide if that object is to be included in the query. Clearly, this iteration would be inefficient expensive, and a node can use some method to speed up the process.  However, this is an implementation detail and thus beyond the scope of this document.</p><p>To determine whether or not each object should be included into a query, a node shall apply the following <code>QueryStatus</code> function.  If the function returns true, then the object should be included into the query.</p><div class="codeBlockContainer_I0IT language-vbnet theme-code-block"><div class="codeBlockContent_wNvx vbnet"><pre tabindex="0" class="prism-code language-vbnet codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FUNCTION Bool = QueryStatus(type,objectID)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IF type not in VotingEnabledObjectTypes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RETURN FALSE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ELSE IF opinionField != NULL AND level =1 and currentTime &gt; timeFormed+DSMALL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RETURN TRUE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ELSE RETURN FALSE      </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IF the object does not exist</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RETURN `FALSE`.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>When FPC succesfully stops voting on an object, it sets in the <code>opinionField</code> the <code>opinion</code> to the final opinion and modifies <code>level</code>  to <code>2</code> so that <code>QueryStatus</code> returns false.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="6124-answer-status">6.1.2.4 Answer Status<a class="hash-link" href="#6124-answer-status" title="Direct link to heading">​</a></h3><p>Every time FPC receives a query request, it checks whether or not it should reply; see <a href="/IOTA-2.0-Research-Specifications/6.3FastProbabilisticConsensus">FPC</a>.  To do so, it applies the following  <code>AnswerStatus</code> function to object in the query request to determine if a response should be made.  If <code>AnswerStatus</code> returns <code>FALSE</code> for any object in the query request, a query response will not be prepared.</p><div class="codeBlockContainer_I0IT language-vbnet theme-code-block"><div class="codeBlockContent_wNvx vbnet"><pre tabindex="0" class="prism-code language-vbnet codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FUNCTION Bool=AnswerStatus(type,objectID)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If type not in VotingEnabledObjectTypes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RETURN FALSE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ELSE IF opinionField not = NULL AND (level = 1 OR level = 2) </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RETURN TRUE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ELSE RETURN FALSE </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Lastly, if the object does not exist, the function should return <code>FALSE</code>.</p><h1>6.1.3 Rationale and Alternatives</h1><p>The <code>level</code> field indicates the level of knowledge. It tells us information about what other nodes know.</p><ul><li>Level 1 means that the node only knows that it holds this opinion.</li><li>Level 2 means that the node knows that all nodes have this opinion too (with high probability).</li><li>Level 3 means that the node knows that all nodes have level 2 knowledge (with high probability).</li></ul><p>If a node node only has level 1 knowledge, it needs to vote.  However, if it has level 2 knowledge, it does not need to query as it knows that all nodes have the same opinion. With level 3 knowledge, it knows that no other nodes have level 2 knowledge and thus should not send its node queries.  Thus, with level 3 knowledge, the node does not need to respond. The level of knowledge is the primary criterion in these functions.  </p><p>Moreover, we should not query about objects whose opinion is <code>NULL</code>. In a similar vein, we need should not query about an object until <code>d</code> time after the opinion was set, so we can be sure that all other nodes have set their opinion too. </p><p>Alternatively, we can attempt to manage the same system with a series of finality flags.  However, this has two problems.  First,  we either mark objects which we have never voted upon as final, or some objects will never get a finality flag.  This leads to some complicated, unintuitive logic.
Second, if an attacker can cause only small portions of the network to vote on an object, that vote would be susceptible to an attack.  Thus we need consensus about what to vote on. However, if voting is a binary &quot;yes&quot; or &quot;no&quot;, we would need a consensus algorithm to determine when to vote.  The levels of knowledge does not treat voting in a binary way, bypassing this problem.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/edit/main/6.1 Objects of Consensus.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/IOTA-2.0-Research-Specifications/5.3Mana"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">5.3 Mana</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/IOTA-2.0-Research-Specifications/6.2OpinionSetting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">6.2 Opinion Setting</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#611-preliminaries" class="table-of-contents__link toc-highlight">6.1.1 Preliminaries</a><ul><li><a href="#6111-motivation" class="table-of-contents__link toc-highlight">6.1.1.1 Motivation</a></li><li><a href="#6112-summary" class="table-of-contents__link toc-highlight">6.1.1.2 Summary</a></li><li><a href="#6113-dependencies" class="table-of-contents__link toc-highlight">6.1.1.3 Dependencies</a></li><li><a href="#6114-parameters-and-lists" class="table-of-contents__link toc-highlight">6.1.1.4 Parameters and Lists</a></li></ul></li><li><a href="#612-detailed-design" class="table-of-contents__link toc-highlight">6.1.2 Detailed Design</a></li><li><a href="#6121-voting-objects-list" class="table-of-contents__link toc-highlight">6.1.2.1 Voting Objects List</a><ul><li><a href="#6122-how-opinions-on-objects-are-stored" class="table-of-contents__link toc-highlight">6.1.2.2 How Opinions on Objects Are Stored</a></li><li><a href="#6123-query-status" class="table-of-contents__link toc-highlight">6.1.2.3 Query Status</a></li><li><a href="#6124-answer-status" class="table-of-contents__link toc-highlight">6.1.2.4 Answer Status</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer padding--none"><div class="container"><div class="row footer__links padding-vert--xl"><div class="col footer__col"><h4 class="footer__title">LEARN</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/learn/about-iota/an-introduction-to-iota">About IOTA</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/iota-token/buying-iota">IOTA Token</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/wallets/what-is-a-wallet">Wallets</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/networks/iota-1.5-chrysalis">Networks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/glossary">Glossary</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/research/research-outline">Research</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/future/future-of-iota">Future of IOTA</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">PARTICIPATE</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/participate/support-the-network/about-nodes">Support the network</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/the-community/discord">The Community</a></li><li class="footer__item"><a href="https://www.iota.org/solutions/partnerships" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partnerships</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/funding/edf-funding">Funding</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/use-cases/industry-applications">Use Cases</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/frameworks/introduction">Frameworks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">BUILD</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/build/welcome">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/build/fundamentals/cryptography">Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/build/exchange-integration/exchange-integration-guide">Exchange Integration</a></li><li class="footer__item"><a class="footer__link-item" href="/build/tutorials/twitch">Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">WIKI</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/team">Team</a></li><li class="footer__item"><a href="https://github.com/iota-community/iota-wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://github.com/jlvandenhout/docusaurus-plugin-docs-editor" target="_blank" rel="noopener noreferrer" class="footer__link-item">Editor Github</a></li><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/participate/contribute-to-wiki/welcome">Contribute</a></li></ul></div></div><div class="footer__bottom padding-bottom--xl"><div><a href="https://www.iota.org" target="_blank" rel="noopener noreferrer"><img src="/img/iota_logo.svg" alt="IOTA Logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/iota_logo.svg" alt="IOTA Logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">© 2022 IOTA Wiki. Built with Docusaurus.</div></div></div><div class="social"><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:var(--ifm-color-gray-900)" href="https://www.youtube.com/c/iotafoundation"><div class="social__font social__icon"></div><div class="social__title">Youtube</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#2C3850" href="https://www.github.com/iotaledger/"><div class="social__font social__icon"></div><div class="social__title">GitHub</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#4B576F" href="https://discord.iota.org/"><div class="social__font social__icon"></div><div class="social__title">Discord</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#6A768E" href="https://www.twitter.com/iota/"><div class="social__font social__icon"></div><div class="social__title">Twitter</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#7D89A1" href="https://www.reddit.com/r/iota/"><div class="social__font social__icon"></div><div class="social__title">Reddit</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#8995AD" href="https://www.linkedin.com/company/iotafoundation/"><div class="social__font social__icon"></div><div class="social__title">LinkedIn</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#99A5BD" href="https://www.instagram.com/iotafoundation/"><div class="social__font social__icon"></div><div class="social__title">Instagram</div></a><a class="social__link padding-horiz--sm padding-vert--md" style="background-color:#BAC6DE" href="https://www.facebook.com/TheIOTAFoundation/"><div class="social__font social__icon"></div><div class="social__title">Facebook</div></a></div></footer></div>
<script src="/assets/js/runtime~main.43588a5c.js"></script>
<script src="/assets/js/main.d11b0959.js"></script>
</body>
</html>