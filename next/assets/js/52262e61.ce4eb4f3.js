"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[59882],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=l(n),h=r,m=u["".concat(s,".").concat(h)]||u[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},42216:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={},o="Chain Rotation",c={unversionedId:"guide/chains_and_nodes/chain-rotation",id:"guide/chains_and_nodes/chain-rotation",title:"Chain Rotation",description:"Get public key of wallet address",source:"@site/next/external/wasp/documentation/docs/guide/chains_and_nodes/chain-rotation.md",sourceDirName:"guide/chains_and_nodes",slug:"/guide/chains_and_nodes/chain-rotation",permalink:"/next/smart-contracts/guide/chains_and_nodes/chain-rotation",draft:!1,editUrl:"https://github.com/iotaledger/wasp/edit/develop/documentation/next/external/wasp/documentation/docs/guide/chains_and_nodes/chain-rotation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Chain Management",permalink:"/next/smart-contracts/guide/chains_and_nodes/chain-management"},next:{title:"Testnet",permalink:"/next/smart-contracts/guide/chains_and_nodes/testnet"}},s={},l=[{value:"Get public key of wallet address",id:"get-public-key-of-wallet-address",level:2},{value:"Start chain",id:"start-chain",level:2},{value:"Add access nodes",id:"add-access-nodes",level:2},{value:"Run DKG",id:"run-dkg",level:2},{value:"Rotate chain",id:"rotate-chain",level:2}],d={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"chain-rotation"},"Chain Rotation"),(0,r.kt)("h2",{id:"get-public-key-of-wallet-address"},"Get public key of wallet address"),(0,r.kt)("p",null,"The \u201cChain Owner\u201d is the only entity that can perform administrative tasks. Any Iota/Shimmer Layer1 public key can be used. Whoever owns that key, basically owns the chain.\nIn this example we'll be using the keys auto-generated by ",(0,r.kt)("inlineCode",{parentName:"p"},"wasp-cli init"),".  In a consortium it would be wise to use a multisig setup."),(0,r.kt)("p",null,"Get wallet public key with the command below"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasp-cli address\n")),(0,r.kt)("p",null,"Copy the public key and pass that to the ",(0,r.kt)("inlineCode",{parentName:"p"},"--gov-contraller")," flag on the ",(0,r.kt)("inlineCode",{parentName:"p"},"wasp-cli chain deploy")," command."),(0,r.kt)("h2",{id:"start-chain"},"Start chain"),(0,r.kt)("p",null,"Before starting a chain, all nodes need to trust each other. See ",(0,r.kt)("a",{parentName:"p",href:"/next/smart-contracts/guide/chains_and_nodes/setting-up-a-chain#trust-setup"},"Trust setup")," for instructions on chain peering. Deploy a new chain with the command below"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'wasp-cli chain deploy --description "Test Chain" --gov-controller ${wallet_public_key} --committee 0,1 --evm-chainid 1076\n')),(0,r.kt)("h2",{id:"add-access-nodes"},"Add access nodes"),(0,r.kt)("p",null,"To introduce new committee nodes, its recommended to add them as access nodes while the previous committee is still in place, so that they can sync the chain state.\nIf all you want to do is remove existing nodes from the chain then skip this step."),(0,r.kt)("p",null,"To learn more about adding access nodes see ",(0,r.kt)("a",{parentName:"p",href:"/next/smart-contracts/guide/chains_and_nodes/chain-management#changing-access-nodes"},"chain management"),". Once you have configured at least one access node, add their public keys with the command below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasp-cli chain change-access-nodes accept ${node_pub_key}\n")),(0,r.kt)("p",null,"Run that command for each new access node public key.\nWait for the new access nodes to be fully synced before issuing the ",(0,r.kt)("inlineCode",{parentName:"p"},"rotate")," command."),(0,r.kt)("h2",{id:"run-dkg"},"Run DKG"),(0,r.kt)("p",null,"Update your ",(0,r.kt)("inlineCode",{parentName:"p"},"wasp-cli")," config and run the dkg command with the indices for the new committee members"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasp-cli chain rundkg --committee=0,2 --quorum=2\n")),(0,r.kt)("p",null,"Copy the new public key"),(0,r.kt)("h2",{id:"rotate-chain"},"Rotate chain"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasp-cli chain rotate ${new_chain_pub_key}\n")))}p.isMDXComponent=!0}}]);