"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[86600],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>u});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},h=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),p=d(a),u=o,m=p["".concat(l,".").concat(u)]||p[u]||c[u]||r;return a?n.createElement(m,s(s({ref:t},h),{},{components:a})):n.createElement(m,s({ref:t},h))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var d=2;d<r;d++)s[d]=a[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},71358:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var n=a(87462),o=(a(67294),a(3905));const r={title:"Data and Value Transfer",description:"Learn how the Shimmer Protocol transfers the native Shimmer Tokens.",image:"/img/iota-wiki.png",keywords:["explanation","data transfer","value transfer","transactions","outputs","blocks"]},s="Shimmer Value Transactions",i={unversionedId:"data-and-value-transfer",id:"data-and-value-transfer",title:"Data and Value Transfer",description:"Learn how the Shimmer Protocol transfers the native Shimmer Tokens.",source:"@site/next/learn/data-and-value-transfer.md",sourceDirName:".",slug:"/data-and-value-transfer",permalink:"/next/learn/data-and-value-transfer",draft:!1,editUrl:"https://github.com/iota-wiki/iota-wiki/edit/main/next/learn/data-and-value-transfer.md",tags:[],version:"current",lastUpdatedAt:1664326631,formattedLastUpdatedAt:"Sep 28, 2022",frontMatter:{title:"Data and Value Transfer",description:"Learn how the Shimmer Protocol transfers the native Shimmer Tokens.",image:"/img/iota-wiki.png",keywords:["explanation","data transfer","value transfer","transactions","outputs","blocks"]},sidebar:"about",previous:{title:"The Coordinator",permalink:"/next/learn/coordinator"},next:{title:"Output Types and Features",permalink:"/next/learn/outputs"}},l={},d=[{value:"Simple Example",id:"simple-example",level:2},{value:"The Goal",id:"the-goal",level:3},{value:"Choosing Where to Attach Messages",id:"choosing-where-to-attach-messages",level:3},{value:"Signing the Messages",id:"signing-the-messages",level:3},{value:"Waiting for the Messages to be Confirmed",id:"waiting-for-the-messages-to-be-confirmed",level:3},{value:"Clients",id:"clients",level:2},{value:"Nodes",id:"nodes",level:2}],h={toc:d};function c(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"shimmer-value-transactions"},"Shimmer Value Transactions"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Shimmer Value Transactions",src:a(26830).Z,width:"862",height:"200"})),(0,o.kt)("p",null,"This page explains how Shimmer tokens are sent and received in the Shimmer network with references to more detailed content."),(0,o.kt)("h2",{id:"simple-example"},"Simple Example"),(0,o.kt)("p",null,"To explain how Shimmer tokens are transferred from one address to another, this topic follows three characters: Alice, Bob, and Charlie."),(0,o.kt)("h3",{id:"the-goal"},"The Goal"),(0,o.kt)("p",null,"Charlie wants to transfer 10 SMR to Bob."),(0,o.kt)("h3",{id:"choosing-where-to-attach-messages"},"Choosing Where to Attach Messages"),(0,o.kt)("p",null,"To transfer 10 SMR to Bob, Charlie must attach a value block to the Tangle. For that, he needs between one and eight tip blocks that he can attach to his block."),(0,o.kt)("p",null,"To get these tip blocks, Charlie requests them from a node."),(0,o.kt)("p",null,"The node selects these blocks by using an algorithm called ",(0,o.kt)("strong",{parentName:"p"},"Uniform Random Tip Selection")," ",(0,o.kt)("a",{parentName:"p",href:"https://iotaledger.github.io/tips/tips/TIP-0003/tip-0003.html"},"URTS"),". This algorithm selects between one and eight valid tips that lead to a valid ledger state."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The ledger state is a record of all the value blocks that have transferred Shimmer tokens in the Tangle, including the state of all balances on addresses. This state must always be balanced: the total number of Shimmer tokens must always add to the total supply.")),(0,o.kt)("admonition",{title:"Send Data",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"The Stardust protocol allows you to attach ",(0,o.kt)("a",{parentName:"p",href:"/next/learn/outputs#metadata"},"metadata")," to any transaction.")),(0,o.kt)("h3",{id:"signing-the-messages"},"Signing the Messages"),(0,o.kt)("p",null,"Charlie signs an input block with his private key to prove to nodes that he is indeed the owner of the Shimmer tokens in his address. This input block withdraws 10 SMR from his address."),(0,o.kt)("p",null,"Charlie then creates an output block to deposit that 10 SMR into Bob's address. This block does not need a signature because it is not withdrawing Shimmer tokens."),(0,o.kt)("p",null,"Then Charlie puts all the blocks in a ",(0,o.kt)("a",{parentName:"p",href:"/introduction/explanations/what_is_stardust/rethink_utxo"},"UTXO")," and sends them to a node on a Shimmer network."),(0,o.kt)("h3",{id:"waiting-for-the-messages-to-be-confirmed"},"Waiting for the Messages to be Confirmed"),(0,o.kt)("p",null,"Anyone is free to send blocks to a node at any time. As a result, selecting valid tip blocks is not always a simple matter. The milestone, however, determines which blocks are included and confirmed based on deterministic ordering."),(0,o.kt)("p",null,"For example, what if Charlie actually attached two blocks to the Tangle: one that transferred 10 SMR to Bob, and one that transferred 10 SMR to Alice? Together, these blocks would be called a ",(0,o.kt)("strong",{parentName:"p"},"double-spend")," because they try to transfer the same Shimmer tokens to different addresses."),(0,o.kt)("p",null,"Messages in the Tangle are confirmed by special blocks called ",(0,o.kt)("strong",{parentName:"p"},"milestones"),". Milestones are issued by a special node called Coordinator, which is operated by the Shimmer Foundation and is therefore still a centralized part of the Consensus."),(0,o.kt)("p",null,"After Charlie's block is confirmed by a milestone, the nodes update his and Bob's balances to reflect the transfer of 10 SMR to Bob's address. Bob can now spend his new Shimmer tokens."),(0,o.kt)("p",null,"We can go a bit more into detail and observe the single steps taken by the participants."),(0,o.kt)("h2",{id:"clients"},"Clients"),(0,o.kt)("p",null,"Everything starts with a client. A client is software that initiates and creates Shimmer transactions for a user (whether human, machine or device). Most clients for users will come in the form of wallet software like the ",(0,o.kt)("a",{parentName:"p",href:"https://firefly.Shimmer.org/"},"Firefly Wallet"),"."),(0,o.kt)("p",null,"Simple command-line tools for professional users, like the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/iotaledger/cli-wallet/"},"CLI Wallet"),", are also available."),(0,o.kt)("p",null,"Machines, sensors, devices, etc. will use the code of the Shimmer wallet libraries to create and execute the transactions autonomously."),(0,o.kt)("p",null,"To send a value transaction into the Shimmer network, a client creates a Shimmer block that includes a ",(0,o.kt)("strong",{parentName:"p"},"signed transaction payload"),". In this payload, all the data is specified to tell the Shimmer network how many tokens from address A (owned by the issuer of the block) should be transferred to address B and makes it possible to upgrade the state of the Shimmer Ledger accordingly."),(0,o.kt)("p",null,"The signed transaction payload must contain a digital signature that guarantees that the transaction's sender is the owner of the address where those funds are currently stored. This is guaranteed through signing the transaction with the private key of that address. A public key, which is also part of the block, is used to validate the ownership of the funds."),(0,o.kt)("p",null,"The next step is that the client connects to a node in the Shimmer network and asks this node for valid tips to include in the block. After the tips (between one and eight previous blocks of the Tangle) are known to the client, they can be included in the block and create a reference path for this block in the Tangle. Finally, the client submits this block that includes the transaction payload for validation and processing to the node."),(0,o.kt)("h2",{id:"nodes"},"Nodes"),(0,o.kt)("p",null,"Nodes are the bookkeepers, decision-makers, and validators of all information in the Shimmer network. Every node in the Shimmer network knows the exact status and value of all existing addresses in the Shimmer network at any given time. This is called ",(0,o.kt)("strong",{parentName:"p"},"the ledger state"),"."),(0,o.kt)("p",null,"A node is also the entry point for clients into the network. The clients submit blocks to the node over a specified port in the node. The node collects all arriving traffic of this entry port in its inbox and first checks if the block is correctly formatted and can be processed."),(0,o.kt)("p",null,"If all bits of the block are readable for the node and the node detects the signed transaction payload included in the block, a validation process starts."),(0,o.kt)("p",null,"Firstly, the node verifies if the address that tries to send these funds has the needed balance to do so. So it checks its current knowledge of that address (ledger state) to see whether the address has enough funds. It also checks whether the transaction is semantically correct, given the constraints defined in the to-be consumed funds. The node also checks that no conflicts are known in the network that would make it possible to spend more funds than are currently located on the address (in other words, a double spend). So if there is another block currently present and known for the node that wants to spend the same funds of the address, a conflict is detected and both blocks will be processed into conflict resolution; you will read more about this process later."),(0,o.kt)("p",null,'If no conflicts are detected, the next step for a node is to submit the requested update of the ledger state: "remove amount Funds x from address A and add those amount to address B". Submitting happens via the so-called ',(0,o.kt)("strong",{parentName:"p"},"gossip protocol"),"."),(0,o.kt)("p",null,"The node sends its updated ledger state to all its directly connected neighboring nodes. Every node is connected to several other nodes. Those nodes receive the updated ledger state from their neighbors. Every node compares the request to its currently known version of the ledger and checks again for conflicts. If no conflicts are found, the node updates his ledger state and sends the updated state to his neighbors again."),(0,o.kt)("p",null,"This leads to a fast propagation of ledger updates through the network, and in a few seconds, it has reached every node in the network and is therefore accepted and confirmed. In this stage, the block has reached full confirmation and is considered solid. It will now be added to the tip pool of every node and can be used as a reference by new blocks."),(0,o.kt)("admonition",{title:"More Transaction Types",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can find more detailed descriptions\nof ",(0,o.kt)("a",{parentName:"p",href:"/introduction/explanations/ledger/simple_transfers"},"simple"),"\n, ",(0,o.kt)("a",{parentName:"p",href:"/introduction/explanations/ledger/alias"},"alias"),",\n",(0,o.kt)("a",{parentName:"p",href:"/introduction/explanations/ledger/foundry"},"native tokens and foundry"),",\nand ",(0,o.kt)("a",{parentName:"p",href:"/introduction/explanations/ledger/nft"},"NFT")," transactions\nthe ",(0,o.kt)("a",{parentName:"p",href:"/introduction/welcome"},"Stardust Protocol docs"),".")))}c.isMDXComponent=!0},26830:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/banner_value_transfer-a038724f83617dbee77bb6264f3c0ea3.svg"}}]);