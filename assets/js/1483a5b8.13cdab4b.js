"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[11827],{30701:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return d},default:function(){return u}});var a=n(22122),i=n(19756),r=(n(67294),n(3905)),o=["components"],c={keywords:["ISCP","Smart Contracts","Chain","EVM","Solidity","Deploy"],description:"How to create a new EVM Chain and get started",image:"/img/logo/WASP_logo_dark.png"},s="Creating an EVM Chain",l={unversionedId:"guide/evm/create-chain",id:"guide/evm/create-chain",isDocsHomePage:!1,title:"Creating an EVM Chain",description:"How to create a new EVM Chain and get started",source:"@site/external/wasp/documentation/docs/guide/evm/create-chain.md",sourceDirName:"guide/evm",slug:"/guide/evm/create-chain",permalink:"/wasp/guide/evm/create-chain",tags:[],version:"current",frontMatter:{keywords:["ISCP","Smart Contracts","Chain","EVM","Solidity","Deploy"],description:"How to create a new EVM Chain and get started",image:"/img/logo/WASP_logo_dark.png"},sidebar:"tutorialSidebar",previous:{title:"EVM Limitations within ISCP",permalink:"/wasp/guide/evm/limitations"},next:{title:"Solidity Smart Contract Example",permalink:"/wasp/guide/evm/example"}},d=[{value:"1. Creating the ISCP chain",id:"1-creating-the-iscp-chain",children:[]},{value:"2. Fund your account on your newly created chain",id:"2-fund-your-account-on-your-newly-created-chain",children:[]},{value:"3. Deploy the EVM Chain Contract",id:"3-deploy-the-evm-chain-contract",children:[]},{value:"Running the JSON/RPC interface",id:"running-the-jsonrpc-interface",children:[]}],h={toc:d};function u(e){var t=e.components,c=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},h,c,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"creating-an-evm-chain"},"Creating an EVM Chain"),(0,r.kt)("p",null,"EVM chains run inside ISCP chains. So in order to start an EVM chain, you will first need to follow the steps to start an ISCP chain or use a existing ISCP chain to start the EVM chain on."),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"An ISCP chain can only contain 1 EVM chain contract. If your ISCP chain already has an EVM chain contract, then that is the one that should be used instead of creating a new one."))),(0,r.kt)("h3",{id:"1-creating-the-iscp-chain"},"1. Creating the ISCP chain"),(0,r.kt)("p",null,"If you don't have a ISCP chain you should create one first. To do so, follow the instructions ",(0,r.kt)("a",{parentName:"p",href:"../../chains_and_nodes/setting-up-a-chain/"},"on setting up a chain"),"."),(0,r.kt)("h3",{id:"2-fund-your-account-on-your-newly-created-chain"},"2. Fund your account on your newly created chain"),(0,r.kt)("p",null,"In order to deploy the EVM chain contract you first need to have some IOTA locked on your newly created chain to fund that action. In order to do this simply run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"wasp-cli chain deposit IOTA:10000\n")),(0,r.kt)("p",null,"This locks 10000 IOTA into your name on your newly created chain which can be used on that chain to pay for the creation of the EVM Chain contract."),(0,r.kt)("h3",{id:"3-deploy-the-evm-chain-contract"},"3. Deploy the EVM Chain Contract"),(0,r.kt)("p",null,"In order to deploy the EVM Chain contract, we first need to make sure that the token that will be used on that chain is supplied right at its inception to a given address. You will have to generate a compatible address first with a private key file. Probably the most intuitive way to do this is by utilizing ",(0,r.kt)("a",{parentName:"p",href:"https://metamask.io"},"Metamask"),". In MetaMask we create a wallet (it does not matter what chain it is connected to). Once a wallet is generated you will see a wallet address under its name. You can copy this to your clipboard. This is the address that will receive the full supply of the tokens on that chain."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"MetaMask",src:n(11723).Z})),(0,r.kt)("p",null,"Once you have this, we are ready to deploy the EVM chain with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"wasp-cli chain evm deploy --alloc 0x0ad2406D4A50C199ddD08086bC89E8189e86d9d4:1000000000000000000000000\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--alloc")," parameter makes sure the provided address (",(0,r.kt)("inlineCode",{parentName:"p"},"0x0ad2406D4A50C199ddD08086bC89E8189e86d9d4")," in this case) will receive 1 million tokens (it has a additional 18 zeroes for decimals)."),(0,r.kt)("p",null,"Once this command has been executed successfully your EVM chain is up and running and ready to be used."),(0,r.kt)("h3",{id:"running-the-jsonrpc-interface"},"Running the JSON/RPC interface"),(0,r.kt)("p",null,"In order to communicate with the EVM contract we need to run an additional server application that is compatible with how interaction usually takes place on other networks. This allows us to use other tools from those ecosystems to connect to our EVM chain like ",(0,r.kt)("a",{parentName:"p",href:"https://metamask.io"},"MetaMask")," and ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org/"},"Hardhat"),". To run this server simply run: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"wasp-cli chain evm jsonrpc --chainid 1074\n")),(0,r.kt)("p",null,"This will start the JSON/RPC server on port 8545 for us with Chain ID 1074. We can now simply point MetaMask or Hardhat to that server's address on port 8545 and interact with it like any other EVM based chain."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Re-using an existing Chain ID is not recommended and can be a security risk. For any serious chain you will be running make sure you register a unique Chain ID on ",(0,r.kt)("a",{parentName:"p",href:"https://chainlist.org/"},"Chainlist")," and use that instead of the default."))),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The current implementation uses the wasp-cli's saved account to pay for any fees in IOTA while using the JSON / RPC interface, this is of course not ideal in a normal usage scenario. Releases after this one will address this in a more user friendly way."))))}u.isMDXComponent=!0},3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return p}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=l(n),p=i,m=u["".concat(s,".").concat(p)]||u[p]||h[p]||r;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function p(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var l=2;l<r;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},11723:function(e,t,n){t.Z=n.p+"assets/images/metamask-a9eb1000ab2aa4bcbc9016721ebb88c0.png"}}]);