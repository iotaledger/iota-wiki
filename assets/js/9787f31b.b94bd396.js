"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[93020],{46227:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return p},default:function(){return f}});var r=n(22122),o=n(19756),a=(n(67294),n(3905)),i=["components"],s={},c="Prevention of MEV in ISCP",u={unversionedId:"rfc/prevent-mev",id:"rfc/prevent-mev",isDocsHomePage:!1,title:"Prevention of MEV in ISCP",description:"MEV stands for Miner Extractable Value. Miner can take advantage of its knowledge, include and order its own transactions",source:"@site/external/wasp/documentation/docs/rfc/prevent-mev.md",sourceDirName:"rfc",slug:"/rfc/prevent-mev",permalink:"/wasp/rfc/prevent-mev",tags:[],version:"current",frontMatter:{}},p=[],l={toc:p};function f(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"prevention-of-mev-in-iscp"},"Prevention of MEV in ISCP"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"MEV")," stands for ",(0,a.kt)("em",{parentName:"p"},"Miner Extractable Value"),". Miner can take advantage of its knowledge, include and order its own transactions\ninto the block to its advantage: front-running, sandwiching, abusing early knowledge of oracle submitted values and similar."),(0,a.kt)("p",null,"It is a common thing e.g. in Ethereum because in Nakamoto PoW consensus miner fully defines the block content."),(0,a.kt)("p",null,"Generally speaking, in the BFT consensus used by ISCP it is impossible. This is because the VM is run post-consensus.\nAll validator nodes first agree on inputs to computations (the ",(0,a.kt)("em",{parentName:"p"},"batch"),"), and the rest is deterministic,\ni.e. cannot be influenced by less than 2/3+1 majority."),(0,a.kt)("p",null,"From the other side, in ISCP consensus the batch has to be sorted deterministically before running the VM. It opens a theoretical",(0,a.kt)("br",{parentName:"p"}),"\n","opportunity to take advantage in case the order or requests can be computed in advance."),(0,a.kt)("p",null,"To prevent it, we propose to use the native unpredictable yet deterministic randomness generated during the consensus.",(0,a.kt)("br",{parentName:"p"}),"\n","The batch will be sorted using that value to produce unpredictable order of requests."),(0,a.kt)("p",null,"Let's say R is a random number produced by the ACS component of the consensus and applying the BLS threshold cryptography.",(0,a.kt)("br",{parentName:"p"}),"\n","Then we can sort the batch for example by ",(0,a.kt)("em",{parentName:"p"},"(requestID+R) mod 2^16"),".",(0,a.kt)("br",{parentName:"p"}),"\n","That will give a deterministic yet unpredictable order in the batch of requests.",(0,a.kt)("br",{parentName:"p"}),"\n","MEV will be impossible because parties won't be able to influence the order of requests in the batch."),(0,a.kt)("p",null,"Note: this also means that the order in which requests are processed is random for the user. This is fine because it is undefined anyway.",(0,a.kt)("br",{parentName:"p"}),"\n","If the user needs a strict order, he/she can wait for the completion of the previous request before posting the next one."))}f.isMDXComponent=!0},3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),f=u(n),d=o,m=f["".concat(c,".").concat(d)]||f[d]||l[d]||a;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"}}]);