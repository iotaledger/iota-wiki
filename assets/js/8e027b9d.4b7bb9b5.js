"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[7491],{80382:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var a=n(22122),r=n(19756),o=(n(67294),n(3905)),i=["components"],s={},l=void 0,c={unversionedId:"in_progress/todo/tr-fa",id:"in_progress/todo/tr-fa",isDocsHomePage:!1,title:"tr-fa",description:"Obsolete. To be adjusted to the new version",source:"@site/external/wasp/documentation/docs/in_progress/todo/tr-fa.md",sourceDirName:"in_progress/todo",slug:"/in_progress/todo/tr-fa",permalink:"/wasp/in_progress/todo/tr-fa",version:"current",frontMatter:{}},p=[{value:"<em>TokenRegistry</em>",id:"tokenregistry",children:[]},{value:"<em>FairAuction</em>",id:"fairauction",children:[]}],u={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Obsolete. To be adjusted to the new version")),(0,o.kt)("hr",null),(0,o.kt)("h1",{id:"handling-tagged-tokens-with-tokenregistry-and-fairauction"},"Handling tagged tokens with ",(0,o.kt)("em",{parentName:"h1"},"TokenRegistry")," and ",(0,o.kt)("em",{parentName:"h1"},"FairAuction")),(0,o.kt)("p",null,"Tagged tokens, (a.k.a. colored tokens) is a powerful feature of the ",(0,o.kt)("a",{parentName:"p",href:"/wasp/misc/utxo"},"UTXO ledger"),".\nTwo PoC smart contracts, ",(0,o.kt)("em",{parentName:"p"},"TokenRegistry")," and ",(0,o.kt)("em",{parentName:"p"},"FairAuction")," demonstrates how smart contract can manipulate them and\nextend their functions. The demo dashboards can be found ",(0,o.kt)("a",{parentName:"p",href:"http://waspdev01.iota.cafe:10000"},"here"),"."),(0,o.kt)("h2",{id:"tokenregistry"},(0,o.kt)("em",{parentName:"h2"},"TokenRegistry")),(0,o.kt)("p",null,"Any wallet can mint tagged tokens by creating transaction output with ",(0,o.kt)("inlineCode",{parentName:"p"},"new-color"),". The ",(0,o.kt)("em",{parentName:"p"},"minting"),'\nmeans "tagging" the iota tokens with color code, "painting" iota tokens.'),(0,o.kt)("p",null,"The tagged tokens then can be moved around and sent to addresses just like any other token.\nThe tag of it, the ",(0,o.kt)("inlineCode",{parentName:"p"},"color"),", is a 32 byte long code which doesn't say much about the token."),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"TokenRegistry")," is a simple smart contract which keeps a registry of tagged tokens with their metadata.\nIt also keeps cryptographical proof when, how many and which address minted the tagged tokens. "),(0,o.kt)("p",null,"The program Go code with program hash ",(0,o.kt)("inlineCode",{parentName:"p"},"8h2RGcbsUgKckh9rZ4VUF75NUfxP4bj1FC66oSF9us6p")," of the smart contract\ncan be found ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/iotaledger/wasp"},"in repository TODO"),"."),(0,o.kt)("p",null,"The following command mints 3 tokens into the same address of the wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'wasp-cli fa mint "My first 3 coins" 3')),(0,o.kt)("p",null,"With ",(0,o.kt)("inlineCode",{parentName:"p"},"fa")," tag ",(0,o.kt)("inlineCode",{parentName:"p"},"wasp-cli")," derives we are dealing with the ",(0,o.kt)("inlineCode",{parentName:"p"},"TokenRegistry"),".\nThe  command creates a transaction which contains wor things in it:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'"minting" itself, assigning the new tag to 3 iotas asn sending them to the same address'),(0,o.kt)("li",{parentName:"ul"},"the ",(0,o.kt)("inlineCode",{parentName:"li"},"mint")," request to the ",(0,o.kt)("em",{parentName:"li"},"TokenRegistry"),".")),(0,o.kt)("p",null,"It is an atomic operation: either both token minting and sending the request is successful, or none of it."),(0,o.kt)("p",null,"The program will output something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"using Goshimmer host waspdev03.iota.cafe:8080\nMinted 3 tokens of color Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w into address WoCZCHKr1AsbDXXyPQn5JDs7jkbQ2LNDrADXGXTqB7pW.\nMetadata of the supply: 'test coin for an auction'\nMetadata was sent to TokenRegistry SC at bX3H7Sfh8Ez3g5ygevbUnchTKm6NjTtD3MsHQKGuMTgC\n")),(0,o.kt)("p",null,"The minted tokens goes right into the same address which created the ",(0,o.kt)("inlineCode",{parentName:"p"},"mint")," request."),(0,o.kt)("p",null,"The request itself is picked by the SC and result in record in the state of it. It contains:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"color of the minted tokens"),(0,o.kt)("li",{parentName:"ul"},"minted supply, 3 in this case"),(0,o.kt)("li",{parentName:"ul"},"address, the originator of the new supply"),(0,o.kt)("li",{parentName:"ul"},"description text"),(0,o.kt)("li",{parentName:"ul"},"any optional attached metadata")),(0,o.kt)("p",null,"The record cannot be faked, and it is immutable in the smart contract.\nSo, if a supply was minted with the ",(0,o.kt)("em",{parentName:"p"},"TokenRegistry"),",\nthe metadata contained in it can be trusted by anyone, because it is a cryptographical proof it is correct."),(0,o.kt)("h2",{id:"fairauction"},(0,o.kt)("em",{parentName:"h2"},"FairAuction")),(0,o.kt)("p",null,"What can we do with tagged tokens? They actually can represent real world assets, like shares,\ncollectible tokens or any other use case. The powerful thing is those tokens can be moved around the ledger\nbetween addresses using standard IOTA wallet: there's no need for any smart contracts."),(0,o.kt)("p",null,"But if we want to sell it on the market, we have to entrust someone who is running that market and send it the\ntoken(s) we want to sell. Example of would be an exchange."),(0,o.kt)("p",null,"Here we provide alternative: a simple demo smart contract ",(0,o.kt)("em",{parentName:"p"},"FairAuction")," which implements a simple\ndistributed marketplace where you can sell and buy tagged tokens for iotas in an auction."),(0,o.kt)("p",null,"In order to sell one of 3 tokens we minted above we can use the following command:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'wasp-cli fa start-auction "my first auction" Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w 1 100 60')," "),(0,o.kt)("p",null,"The command will send request to the smart contract instance and it will start auction for 1 token of\ncolor ",(0,o.kt)("inlineCode",{parentName:"p"},"Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w")," with minimum bid of 100 iotas and duration of 60 minutes."),(0,o.kt)("p",null,"With the ",(0,o.kt)("inlineCode",{parentName:"p"},"start-auction")," request the tagged token will be sent to the smart contract address. "),(0,o.kt)("p",null,"Smart contract starts an auction by self-posting ",(0,o.kt)("inlineCode",{parentName:"p"},"close-auction")," request which is ",(0,o.kt)("strong",{parentName:"p"},"time-locked")," for the duration\nof the auction, i.e. in the example above for 60 minutes.\nThe committee nodes will automatically run that request after 60 minutes as a result of consensus between nodes that\nauction closing time is over.  "),(0,o.kt)("p",null,"Next 60 minutes anyone can place bids in the auction with commands like this:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"wasp-cli fa place-bid Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w 120")),(0,o.kt)("p",null,"Upon expiration of the duration of the auction, the time-locked request will be unlocked and\nauction will be closed by selecting first bidder with the highest bid as a winner.\nIt is all programmed in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/iotaledger/wasp"},"code of the smart contract TODO"),"."),(0,o.kt)("p",null,"The smart contract will transfer tokens for sale to the winner and will return all placed sums to non-winning bidders.\nIt is all codded in the smart contract and it can't be overriden by any parties which do not have quorum.\nHence ",(0,o.kt)("em",{parentName:"p"},"FairAuction"),"."))}d.isMDXComponent=!0},3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);